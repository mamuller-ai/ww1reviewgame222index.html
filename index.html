<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>WWI Defense Command</title>
<style>
body{
background:#111;
color:white;
font-family:Arial;
text-align:center;
}
h1{margin-bottom:5px;}

#stats{
margin:10px;
font-size:18px;
}

#map{
width:900px;
height:450px;
margin:auto;
position:relative;
border:4px solid white;
background-image:url('https://upload.wikimedia.org/wikipedia/commons/3/38/Europe_1914_map_en.png');
background-size:cover;
overflow:hidden;
cursor:crosshair;
}

.enemy{
width:24px;
height:24px;
background:red;
border-radius:50%;
position:absolute;
top:200px;
left:0;
}

.tower{
width:30px;
height:30px;
background:limegreen;
position:absolute;
border-radius:5px;
}

.bullet{
width:6px;
height:6px;
background:yellow;
position:absolute;
border-radius:50%;
}

button{
padding:10px;
margin:5px;
font-size:15px;
}

#questionBox{
margin-top:15px;
}
</style>
</head>
<body>

<h1>WWI Defense Command</h1>

<div id="stats">
Health: <span id="health">100</span> |
Resources: <span id="resources">0</span> |
Wave: <span id="wave">1</span> |
Questions: <span id="answered">0</span>/50
</div>

<div id="map"></div>

<div id="questionBox">
<h3 id="question">Answer correctly to earn defenses!</h3>
<div id="answers"></div>
</div>

<script>

let health=100;
let resources=0;
let wave=1;
let answered=0;
let towers=[];
let enemies=[];
let gameActive=true;

const questions=[
{q:"Spark of WWI?",a:["Franz Ferdinand assassination","Lusitania","Zimmerman Telegram","U-boats"],c:0},
{q:"US entered war as:",a:["Allied","Central","Neutral","Axis"],c:0},
{q:"German submarines:",a:["Tanks","Zeppelins","U-boats","Aces"],c:2},
{q:"Trench ditch fighting:",a:["Imperialism","Militarism","Sub warfare","Trench warfare"],c:3},
{q:"Government persuasion:",a:["Propaganda","Nationalism","Alliances","Imperialism"],c:0},
{q:"Armistice Day:",a:["Nov 11 1918","June 6 1919","May 28","Dec 12"],c:0},
{q:"Militarism means:",a:["Stockpiling weapons","Extreme pride","Colonizing","Alliances"],c:0},
{q:"President during WWI:",a:["Wilson","FDR","TR","Eisenhower"],c:0},
{q:"Treaty ending WWI:",a:["Versailles","Paris","Ghent","Vienna"],c:0},
{q:"Military conscription:",a:["Draft","Dodge","Warrant","Enlist"],c:0},
{q:"Extreme pride:",a:["Nationalism","Militarism","Imperialism","Alliances"],c:0},
{q:"League of Nations exists today?",a:["False","True"],c:0},
{q:"Zimmerman Telegram asked Mexico to:",a:["Attack US","Join Allies","Stay neutral","Attack Britain"],c:0},
{q:"Lusitania sunk by:",a:["Germany","France","Britain","Russia"],c:0},
{q:"Tank introduced by:",a:["Britain","Germany","France","USA"],c:0},
{q:"Ottoman Empire sided with:",a:["Central","Allied"],c:0},
{q:"France wanted ____ at Versailles:",a:["Revenge","Peace only","Neutrality","Alliance with Germany"],c:0},
{q:"No Man's Land was:",a:["Between trenches","Ocean route","German capital","French border"],c:0},
{q:"War Bonds funded:",a:["War effort","Schools","Roads","Taxes"],c:0},
{q:"Victory Gardens helped:",a:["Food supply","Weapons","Ships","Draft"],c:0}
];

// Duplicate to reach 50
while(questions.length<50){
questions.push(...questions.slice(0,5));
}

function updateStats(){
document.getElementById("health").innerText=health;
document.getElementById("resources").innerText=resources;
document.getElementById("wave").innerText=wave;
document.getElementById("answered").innerText=answered;
if(health<=0){
alert("Central Powers Overran Europe!");
location.reload();
}
}

function askQuestion(){
if(answered>=50){
alert("Victory! Treaty of Versailles Signed!");
location.reload();
return;
}
let q=questions[Math.floor(Math.random()*questions.length)];
document.getElementById("question").innerText=q.q;

let html="";
q.a.forEach((ans,i)=>{
html+=`<button onclick="answer(${i},${q.c})">${ans}</button>`;
});
document.getElementById("answers").innerHTML=html;
}

function answer(choice,correct){
answered++;
if(choice==correct){
resources+=15;
}else{
health-=10;
}
updateStats();
askQuestion();
}

document.getElementById("map").addEventListener("click",function(e){
if(resources>=20){
let rect=this.getBoundingClientRect();
let tower=document.createElement("div");
tower.className="tower";
tower.style.left=(e.clientX-rect.left-15)+"px";
tower.style.top=(e.clientY-rect.top-15)+"px";
this.appendChild(tower);
towers.push(tower);
resources-=20;
updateStats();
}
});

function spawnEnemy(){
if(!gameActive) return;
let enemy=document.createElement("div");
enemy.className="enemy";
document.getElementById("map").appendChild(enemy);

let pos=0;
let move=setInterval(()=>{
pos+=2+wave*0.2;
enemy.style.left=pos+"px";

if(pos>880){
health-=5;
updateStats();
clearInterval(move);
enemy.remove();
}
},30);

enemies.push(enemy);
}

function towerAttack(){
towers.forEach(tower=>{
enemies.forEach(enemy=>{
if(enemy && tower){
let tx=tower.offsetLeft;
let ty=tower.offsetTop;
let ex=enemy.offsetLeft;
let ey=enemy.offsetTop;
let dist=Math.hypot(tx-ex,ty-ey);
if(dist<150){
enemy.remove();
resources+=5;
}
}
});
});
}

setInterval(()=>{
spawnEnemy();
wave++;
updateStats();
},4000);

setInterval(()=>{
towerAttack();
},800);

askQuestion();
updateStats();

</script>
</body>
</html>
